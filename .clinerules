# KitTicker Project Rules

## Core Philosophy
> "Do not be a black box; be a magnifying glass."

**Content-First:** Build authority and trust before heavy tech investment.

## Tech Preferences
- Use **Astro** for static/marketing pages
- Use **Next.js 15** for app functionality
- Always use **TypeScript**
- **Tailwind CSS** for styling
- Dark theme with amber accents (`#F59E0B`)

## Naming Conventions
- Components: `PascalCase` (e.g., `ValuationResult.tsx`)
- Files: `kebab-case` (e.g., `how-it-works.astro`)
- Variables: `camelCase` (e.g., `userCredits`)
- Types/Interfaces: `PascalCase` (e.g., `Valuation`)

## Design Tokens
```css
--gold-400: #fbbf24;
--gold-500: #f59e0b;
--gold-600: #d97706;
--bg-primary: #0a0a0a;
--bg-secondary: #111111;
```

## Current Focus
**Phase 1: Content Moat**
- Build "Wikipedia of Product Codes"
- Create SEO content (guides, tutorials)
- Community engagement (Reddit, Twitter)
- Deploy landing page

## AI Output Requirements (Explainable AI)
```typescript
// REQUIRED: Every AI verdict must include evidence
interface ValuationOutput {
  verdict: 'authentic' | 'likely_authentic' | 'suspicious' | 'fake';
  confidence: number;
  evidence: Evidence[];  // MANDATORY - show reasoning
  warnings?: Warning[];
}
```

## Commands
| Command | Action |
|---------|--------|
| "update memory bank" | Review and update all memory-bank/*.md files |
| "what's next" | Check activeContext.md and progress.md |
| "deploy" | Run `npm run build && vercel deploy` |

## Code Quality
- Run `npm run build` before committing
- No TypeScript `any` types
- Prefer Server Components in Next.js
- Keep components under 150 lines

## Cost Engineering Rules
1. Never send full image to premium API
2. Pre-filter on device (TensorFlow.js)
3. Only send cropped regions (product code) to GPT-4o
4. Cache all verified codes (lookup = $0)

## Git Workflow
- Main branch is production
- Create feature branches for new work
- Squash merge to main

## Security Rules
- Never commit API keys or secrets
- Use `.env.local` for local secrets
- Always validate user input server-side
- Rate limit API endpoints
- Sanitize file uploads (type, size)

## AI Assistant Usage
- Read `memory-bank/` at session start
- Check `activeContext.md` for current state
- Update `progress.md` after completing tasks
- Log decisions in `activeContext.md` Decision Log
- Run "what's next" to understand priorities
