---
const navLinks = [
  { href: "/#how-it-works", label: "How It Works" },
  { href: "/#features", label: "Features" },
  { href: "/#pricing", label: "Pricing" },
  { href: "/guides", label: "Guides" },
  { href: "/blog", label: "Blog" },
];
---

<header class="fixed top-0 left-0 right-0 z-50 bg-[var(--bg-primary)]/80 backdrop-blur-xl border-b border-[var(--border-subtle)]">
  <nav class="container flex items-center justify-between h-16">
    <a href="/" class="flex items-center gap-2">
      <svg class="w-6 h-6 text-amber-400" viewBox="0 0 24 24" fill="currentColor">
        <circle cx="12" cy="12" r="10" />
      </svg>
      <span class="text-xl font-bold text-gradient">KitTicker</span>
    </a>
    
    <!-- Desktop Nav -->
    <div class="hidden lg:flex items-center gap-8">
      {navLinks.map(link => (
        <a 
          href={link.href}
          class="text-[var(--text-secondary)] hover:text-white transition-colors text-sm font-medium"
        >
          {link.label}
        </a>
      ))}
    </div>
    
    <div class="flex items-center gap-3">
      <a href="/#pricing" class="btn-primary text-sm py-2 px-4">
        Try Free
      </a>
      
      <!-- Mobile Menu Button -->
      <button 
        id="mobile-menu-btn" 
        class="lg:hidden p-2 text-white hover:text-amber-400 transition-colors"
        aria-label="Open menu"
        aria-expanded="false"
      >
        <svg id="menu-icon-open" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
        </svg>
        <svg id="menu-icon-close" class="w-6 h-6 hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
    </div>
  </nav>
</header>

<!-- Mobile Menu Drawer -->
<div 
  id="mobile-drawer" 
  class="fixed inset-0 z-40 hidden lg:hidden"
>
  <!-- Backdrop -->
  <div id="mobile-backdrop" class="absolute inset-0 bg-black/60 backdrop-blur-sm"></div>
  
  <!-- Drawer Panel -->
  <div class="absolute right-0 top-0 h-full w-72 bg-[var(--bg-secondary)] border-l border-[var(--border-subtle)] pt-20 transform translate-x-0 transition-transform duration-300">
    <nav class="px-6 py-4 space-y-1">
      {navLinks.map(link => (
        <a 
          href={link.href}
          class="mobile-nav-link block py-3 px-4 text-lg text-[var(--text-secondary)] hover:text-white hover:bg-white/5 rounded-lg transition-colors"
        >
          {link.label}
        </a>
      ))}
      
      <div class="pt-4 mt-4 border-t border-[var(--border-subtle)]">
        <a 
          href="/#pricing" 
          class="btn-primary w-full block text-center py-3"
        >
          Get Started Free
        </a>
      </div>
    </nav>
  </div>
</div>

<script>
  const menuBtn = document.getElementById('mobile-menu-btn');
  const drawer = document.getElementById('mobile-drawer');
  const backdrop = document.getElementById('mobile-backdrop');
  const openIcon = document.getElementById('menu-icon-open');
  const closeIcon = document.getElementById('menu-icon-close');
  const mobileLinks = document.querySelectorAll('.mobile-nav-link');
  
  function openMenu() {
    drawer?.classList.remove('hidden');
    openIcon?.classList.add('hidden');
    closeIcon?.classList.remove('hidden');
    menuBtn?.setAttribute('aria-expanded', 'true');
    document.body.style.overflow = 'hidden';
  }
  
  function closeMenu() {
    drawer?.classList.add('hidden');
    openIcon?.classList.remove('hidden');
    closeIcon?.classList.add('hidden');
    menuBtn?.setAttribute('aria-expanded', 'false');
    document.body.style.overflow = '';
  }
  
  menuBtn?.addEventListener('click', () => {
    const isOpen = !drawer?.classList.contains('hidden');
    isOpen ? closeMenu() : openMenu();
  });
  
  backdrop?.addEventListener('click', closeMenu);
  
  mobileLinks.forEach(link => {
    link.addEventListener('click', closeMenu);
  });
  
  // Close on Escape key
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') closeMenu();
  });
</script>
