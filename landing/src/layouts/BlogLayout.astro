---
import BaseLayout from './BaseLayout.astro';

interface Props {
  frontmatter: {
    title: string;
    description: string;
    publishDate: Date;
    updatedDate?: Date;
    author: string;
    image?: string;
    tags?: string[];
    readingTime?: number;
  };
}

const { frontmatter } = Astro.props;

const formatDate = (date: Date) => {
  return new Date(date).toLocaleDateString('en-US', {
    year: 'numeric',
    month: 'long',
    day: 'numeric'
  });
};

// Article Schema for SEO
const articleSchema = {
  "@context": "https://schema.org",
  "@type": "Article",
  "headline": frontmatter.title,
  "description": frontmatter.description,
  "author": {
    "@type": "Organization",
    "name": "KitTicker"
  },
  "publisher": {
    "@type": "Organization",
    "name": "KitTicker",
    "logo": {
      "@type": "ImageObject",
      "url": "https://kitticker.com/logo.png"
    }
  },
  "datePublished": frontmatter.publishDate,
  "dateModified": frontmatter.updatedDate || frontmatter.publishDate,
  "image": frontmatter.image || "https://kitticker.com/og-image.png"
};
---

<BaseLayout 
  title={`${frontmatter.title} | KitTicker Blog`}
  description={frontmatter.description}
  canonicalUrl={`https://kitticker.com/blog/${Astro.url.pathname.split('/').pop()}`}
>
  <!-- Article Schema -->
  <script type="application/ld+json" set:html={JSON.stringify(articleSchema)} />
  
  <article class="min-h-screen bg-[#0a0a0a]">
    <!-- Header -->
    <header class="py-8 border-b border-white/10">
      <div class="max-w-4xl mx-auto px-4">
        <a href="/blog" class="inline-flex items-center gap-2 text-amber-400 hover:text-amber-300 transition-colors mb-6">
          <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
          </svg>
          Back to Blog
        </a>
        
        {frontmatter.tags && frontmatter.tags.length > 0 && (
          <div class="flex flex-wrap gap-2 mb-4">
            {frontmatter.tags.map((tag: string) => (
              <span class="px-3 py-1 text-xs font-medium bg-amber-500/10 text-amber-400 rounded-full">
                {tag}
              </span>
            ))}
          </div>
        )}
        
        <h1 class="text-4xl md:text-5xl font-bold text-white mb-4">
          {frontmatter.title}
        </h1>
        
        <p class="text-xl text-zinc-400 mb-6">
          {frontmatter.description}
        </p>
        
        <div class="flex flex-wrap items-center gap-4 text-sm text-zinc-500">
          <span>By {frontmatter.author}</span>
          <span class="text-zinc-600">|</span>
          <time datetime={frontmatter.publishDate.toISOString()}>
            {formatDate(frontmatter.publishDate)}
          </time>
          {frontmatter.readingTime && (
            <>
              <span class="text-zinc-600">|</span>
              <span>{frontmatter.readingTime} min read</span>
            </>
          )}
          {frontmatter.updatedDate && (
            <>
              <span class="text-zinc-600">|</span>
              <span>Updated {formatDate(frontmatter.updatedDate)}</span>
            </>
          )}
        </div>
      </div>
    </header>
    
    <!-- Featured Image -->
    {frontmatter.image && (
      <div class="max-w-4xl mx-auto px-4 py-8">
        <img 
          src={frontmatter.image} 
          alt={frontmatter.title}
          class="w-full rounded-2xl border border-white/10"
        />
      </div>
    )}
    
    <!-- Content -->
    <div class="max-w-4xl mx-auto px-4 py-12">
      <div class="prose prose-invert prose-lg max-w-none
        prose-headings:text-white prose-headings:font-bold
        prose-h2:text-3xl prose-h2:mt-12 prose-h2:mb-6
        prose-h3:text-2xl prose-h3:mt-8 prose-h3:mb-4
        prose-p:text-zinc-300 prose-p:leading-relaxed
        prose-a:text-amber-400 prose-a:no-underline hover:prose-a:underline
        prose-strong:text-white
        prose-code:text-amber-400 prose-code:bg-zinc-800 prose-code:px-2 prose-code:py-0.5 prose-code:rounded
        prose-pre:bg-zinc-900 prose-pre:border prose-pre:border-white/10
        prose-ul:text-zinc-300 prose-ol:text-zinc-300
        prose-li:marker:text-amber-400
        prose-blockquote:border-amber-400 prose-blockquote:text-zinc-400
        prose-img:rounded-xl prose-img:border prose-img:border-white/10
        prose-table:text-zinc-300
        prose-th:text-white prose-th:bg-zinc-800
        prose-td:border-zinc-700
      ">
        <slot />
      </div>
    </div>
    
    <!-- CTA Section -->
    <div class="max-w-4xl mx-auto px-4 pb-16">
      <div class="bg-gradient-to-r from-amber-500/10 to-transparent rounded-2xl border border-amber-500/20 p-8">
        <h3 class="text-2xl font-bold text-white mb-4">
          Need to verify a product code?
        </h3>
        <p class="text-zinc-400 mb-6">
          Browse our database of verified football shirt product codes.
        </p>
        <a 
          href="/codes"
          class="inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-amber-400 to-amber-600 text-black font-semibold rounded-full hover:shadow-lg hover:shadow-amber-500/25 transition-all"
        >
          Browse Codes
          <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
          </svg>
        </a>
      </div>
    </div>
  </article>
</BaseLayout>
